/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JInternalFrame.java to edit this template
 */
package presentacion.administrador.opciones.empleados;

import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import seguridad.Autenticacion;
import validaciones.Administradores;
import validaciones.Clientes;
import validaciones.Empleados;

/**
 *
 * @author Jorge
 */
public class IFrmRegistrarEmpleados extends javax.swing.JInternalFrame {

    /**
     * Creates new form IFrmRegistrarAdministrador
     */
    public IFrmRegistrarEmpleados() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel2 = new javax.swing.JPanel();
        lblCodigo = new javax.swing.JLabel();
        lblNombre = new javax.swing.JLabel();
        txtCodigo = new javax.swing.JTextField();
        txtNombre = new javax.swing.JTextField();
        btnRegistrar = new javax.swing.JButton();
        lblPaterno = new javax.swing.JLabel();
        lblMaterno = new javax.swing.JLabel();
        Ciudad = new javax.swing.JLabel();
        labelId = new javax.swing.JLabel();
        lblDireccion = new javax.swing.JLabel();
        txtPaterno = new javax.swing.JTextField();
        txtMaterno = new javax.swing.JTextField();
        txtCiudad = new javax.swing.JTextField();
        txtDireccion = new javax.swing.JTextField();
        txtId = new javax.swing.JTextField();
        labelClave = new javax.swing.JLabel();
        labelInicioSesion = new javax.swing.JLabel();
        labelInfoEmpleado = new javax.swing.JLabel();
        pwdClave = new javax.swing.JPasswordField();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();

        setBackground(new java.awt.Color(229, 229, 229));
        setClosable(true);
        setPreferredSize(new java.awt.Dimension(630, 718));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel2.setBackground(new java.awt.Color(221, 221, 221));
        jPanel2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblCodigo.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        lblCodigo.setForeground(new java.awt.Color(0, 0, 0));
        lblCodigo.setText("Codigo:");
        jPanel2.add(lblCodigo, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 80, -1, -1));

        lblNombre.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        lblNombre.setForeground(new java.awt.Color(0, 0, 0));
        lblNombre.setText("Nombre:");
        jPanel2.add(lblNombre, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 130, -1, -1));

        txtCodigo.setBackground(new java.awt.Color(255, 255, 255));
        txtCodigo.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtCodigo.setForeground(new java.awt.Color(0, 0, 0));
        jPanel2.add(txtCodigo, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 70, 204, -1));

        txtNombre.setBackground(new java.awt.Color(255, 255, 255));
        txtNombre.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtNombre.setForeground(new java.awt.Color(0, 0, 0));
        jPanel2.add(txtNombre, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 120, 204, -1));

        btnRegistrar.setBackground(new java.awt.Color(255, 255, 255));
        btnRegistrar.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        btnRegistrar.setForeground(new java.awt.Color(0, 0, 0));
        btnRegistrar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/add_file.gif"))); // NOI18N
        btnRegistrar.setText("Registrar");
        btnRegistrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRegistrarActionPerformed(evt);
            }
        });
        jPanel2.add(btnRegistrar, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 530, 135, 41));

        lblPaterno.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        lblPaterno.setForeground(new java.awt.Color(0, 0, 0));
        lblPaterno.setText("Apellido Paterno:");
        jPanel2.add(lblPaterno, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 180, -1, -1));

        lblMaterno.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        lblMaterno.setForeground(new java.awt.Color(0, 0, 0));
        lblMaterno.setText("Apellido Materno:");
        jPanel2.add(lblMaterno, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 230, -1, -1));

        Ciudad.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        Ciudad.setForeground(new java.awt.Color(0, 0, 0));
        Ciudad.setText("Ciudad:");
        jPanel2.add(Ciudad, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 280, -1, -1));

        labelId.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        labelId.setForeground(new java.awt.Color(0, 0, 0));
        labelId.setText("Id de Usuario:");
        jPanel2.add(labelId, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 420, 120, 30));

        lblDireccion.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        lblDireccion.setForeground(new java.awt.Color(0, 0, 0));
        lblDireccion.setText("Direccion:");
        jPanel2.add(lblDireccion, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 320, -1, 30));

        txtPaterno.setBackground(new java.awt.Color(255, 255, 255));
        txtPaterno.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtPaterno.setForeground(new java.awt.Color(0, 0, 0));
        jPanel2.add(txtPaterno, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 170, 204, -1));

        txtMaterno.setBackground(new java.awt.Color(255, 255, 255));
        txtMaterno.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtMaterno.setForeground(new java.awt.Color(0, 0, 0));
        jPanel2.add(txtMaterno, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 220, 204, -1));

        txtCiudad.setBackground(new java.awt.Color(255, 255, 255));
        txtCiudad.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtCiudad.setForeground(new java.awt.Color(0, 0, 0));
        jPanel2.add(txtCiudad, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 270, 204, -1));

        txtDireccion.setBackground(new java.awt.Color(255, 255, 255));
        txtDireccion.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtDireccion.setForeground(new java.awt.Color(0, 0, 0));
        jPanel2.add(txtDireccion, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 320, 204, -1));

        txtId.setBackground(new java.awt.Color(255, 255, 255));
        txtId.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtId.setForeground(new java.awt.Color(0, 0, 0));
        jPanel2.add(txtId, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 420, 204, -1));

        labelClave.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        labelClave.setForeground(new java.awt.Color(0, 0, 0));
        labelClave.setText("Clave:");
        jPanel2.add(labelClave, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 470, 120, 30));

        labelInicioSesion.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        labelInicioSesion.setForeground(new java.awt.Color(0, 0, 0));
        labelInicioSesion.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelInicioSesion.setText("Información de inicio de sesión");
        jPanel2.add(labelInicioSesion, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 380, 620, -1));

        labelInfoEmpleado.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        labelInfoEmpleado.setForeground(new java.awt.Color(0, 0, 0));
        labelInfoEmpleado.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelInfoEmpleado.setText("Información del Empleado");
        jPanel2.add(labelInfoEmpleado, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 30, 620, -1));

        pwdClave.setBackground(new java.awt.Color(255, 255, 255));
        pwdClave.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jPanel2.add(pwdClave, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 470, 200, 30));

        getContentPane().add(jPanel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 90, 620, 600));

        jPanel1.setBackground(new java.awt.Color(20, 45, 68));

        jLabel1.setFont(new java.awt.Font("Arial", 1, 22)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(229, 229, 229));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Estás registrando a un empleado");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jLabel1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, 90, Short.MAX_VALUE)
        );

        getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 618, -1));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnRegistrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRegistrarActionPerformed
        // TODO add your handling code here:
        final String ERROR_TITULO = "Un problema ha ocurrido...";
        final String CORRECTO_TITULO = "Operación realizada";
        try{
            codigo = txtCodigo.getText();
            nombre = txtNombre.getText();
            paterno = txtPaterno.getText();
            materno = txtMaterno.getText();
            ciudad = txtCiudad.getText();
            direccion = txtDireccion.getText();
            
            idUsuario = txtId.getText();
            clave = String.valueOf(pwdClave.getPassword());

            Autenticacion.registrar(idUsuario, clave, 10);
            Empleados.agregar(codigo, nombre, paterno, materno, ciudad, direccion, idUsuario);

            JOptionPane.showMessageDialog(this, "Se registro al empleado correctamente.", CORRECTO_TITULO, JOptionPane.INFORMATION_MESSAGE);
            this.dispose();
        } catch (InvalidKeySpecException | NoSuchAlgorithmException | NullPointerException e){
            JOptionPane.showMessageDialog(this, "Autenticación: Ha ocurrido un problema grave. Por favor, cierra el programa y vuelve a intentarlo.", "Un problema ha ocurrido...", JOptionPane.ERROR_MESSAGE);
            System.out.println(e.getMessage());
        } catch (IllegalArgumentException e){
            JOptionPane.showMessageDialog(this, e.getMessage(), "Un problema ha ocurrido...", JOptionPane.ERROR_MESSAGE);
            System.out.println(e.getMessage());
        } catch (IllegalStateException e){
            JOptionPane.showMessageDialog(this, "Autenticación | No se puede continuar: No existe una sesión iniciada.", "Un problema ha ocurrido...", JOptionPane.ERROR_MESSAGE);
            this.dispose();
        } catch (SQLException e){
            JOptionPane.showMessageDialog(this, "Datos de una Cuenta | Ha ocurrido un problema mientras nos conectabamos a la BD. Por favor, cierra el programa y vuelve a intentarlo.", "Un problema ha ocurrido...", JOptionPane.ERROR_MESSAGE);
            System.out.println(e.getMessage());
        }
    }//GEN-LAST:event_btnRegistrarActionPerformed
    
    private void limpiar(){
        txtCodigo.setText(null);
        txtNombre.setText(null);
        txtPaterno.setText(null);
        txtMaterno.setText(null);
        txtCiudad.setText(null);
        txtDireccion.setText(null);
        txtId.setText(null);
    }
    
    
    
    private String codigo,nombre,paterno,materno,ciudad,direccion, idUsuario, clave;

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel Ciudad;
    private javax.swing.JButton btnRegistrar;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JLabel labelClave;
    private javax.swing.JLabel labelId;
    private javax.swing.JLabel labelInfoEmpleado;
    private javax.swing.JLabel labelInicioSesion;
    private javax.swing.JLabel lblCodigo;
    private javax.swing.JLabel lblDireccion;
    private javax.swing.JLabel lblMaterno;
    private javax.swing.JLabel lblNombre;
    private javax.swing.JLabel lblPaterno;
    private javax.swing.JPasswordField pwdClave;
    private javax.swing.JTextField txtCiudad;
    private javax.swing.JTextField txtCodigo;
    private javax.swing.JTextField txtDireccion;
    private javax.swing.JTextField txtId;
    private javax.swing.JTextField txtMaterno;
    private javax.swing.JTextField txtNombre;
    private javax.swing.JTextField txtPaterno;
    // End of variables declaration//GEN-END:variables
}
