/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JInternalFrame.java to edit this template
 */
package presentacion.empleados.opciones;

import presentacion.empleados.opciones.IFrmConsultarMovimientos;
import presentacion.empleados.FrmEmpleado;
import entidades.Cuenta;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import validaciones.Cuentas;

/**
 *
 * @author LUCANO
 */
public class IFrmCuentas extends javax.swing.JInternalFrame {

    /**
     * Creates new form IFrmCuentas
     */
    public IFrmCuentas() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        lbl5 = new javax.swing.JLabel();
        txtUser = new javax.swing.JTextField();
        btnMovimientos = new javax.swing.JButton();
        btnBuscar = new javax.swing.JButton();
        btnMoneda = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();
        txtCodigo = new javax.swing.JTextField();
        btnTransaccion = new javax.swing.JButton();

        setClosable(true);

        jPanel1.setBackground(new java.awt.Color(229, 229, 229));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel2.setBackground(new java.awt.Color(252, 162, 17));

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 330, Short.MAX_VALUE)
        );

        jPanel1.add(jPanel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 100, 330));

        lbl5.setFont(new java.awt.Font("Roboto Black", 0, 12)); // NOI18N
        lbl5.setForeground(new java.awt.Color(0, 0, 0));
        lbl5.setText("USUARIO:");
        jPanel1.add(lbl5, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 120, 80, 34));

        txtUser.setEditable(false);
        txtUser.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(txtUser, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 130, 170, -1));

        btnMovimientos.setBackground(new java.awt.Color(255, 255, 255));
        btnMovimientos.setFont(new java.awt.Font("Roboto Medium", 0, 12)); // NOI18N
        btnMovimientos.setForeground(new java.awt.Color(0, 0, 0));
        btnMovimientos.setText("Consultar Movimientos");
        btnMovimientos.setEnabled(false);
        btnMovimientos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMovimientosActionPerformed(evt);
            }
        });
        jPanel1.add(btnMovimientos, new org.netbeans.lib.awtextra.AbsoluteConstraints(500, 210, 160, 40));

        btnBuscar.setBackground(new java.awt.Color(255, 255, 255));
        btnBuscar.setFont(new java.awt.Font("Roboto Medium", 0, 12)); // NOI18N
        btnBuscar.setForeground(new java.awt.Color(0, 0, 0));
        btnBuscar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/search.gif"))); // NOI18N
        btnBuscar.setText("Buscar");
        btnBuscar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBuscarActionPerformed(evt);
            }
        });
        jPanel1.add(btnBuscar, new org.netbeans.lib.awtextra.AbsoluteConstraints(510, 40, 100, 30));

        btnMoneda.setBackground(new java.awt.Color(255, 255, 255));
        btnMoneda.setFont(new java.awt.Font("Roboto Medium", 0, 12)); // NOI18N
        btnMoneda.setForeground(new java.awt.Color(0, 0, 0));
        btnMoneda.setText("Modificar Moneda");
        btnMoneda.setEnabled(false);
        btnMoneda.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMonedaActionPerformed(evt);
            }
        });
        jPanel1.add(btnMoneda, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 210, 190, 40));

        jLabel2.setFont(new java.awt.Font("Roboto Black", 0, 12)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(0, 0, 0));
        jLabel2.setText("CÓDIGO DE LA CUENTA:");
        jPanel1.add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 40, 140, 20));

        txtCodigo.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(txtCodigo, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 40, 170, -1));

        btnTransaccion.setBackground(new java.awt.Color(255, 255, 255));
        btnTransaccion.setFont(new java.awt.Font("Roboto Medium", 0, 12)); // NOI18N
        btnTransaccion.setForeground(new java.awt.Color(0, 0, 0));
        btnTransaccion.setText("Modifcar Transaccion");
        btnTransaccion.setEnabled(false);
        btnTransaccion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTransaccionActionPerformed(evt);
            }
        });
        jPanel1.add(btnTransaccion, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 210, 150, 40));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, 720, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnBuscarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBuscarActionPerformed
        codigo = txtCodigo.getText();
        try {
            cuenta = Cuentas.obtener(codigo);
        } catch (SQLException ex) {
            Logger.getLogger(IFrmCuentas.class.getName()).log(Level.SEVERE, null, ex);
        }
        if(cuenta != null) {
            if(cuenta.getCodigo().compareTo("00000000") != 0) {
                txtUser.setText(cuenta.getCodigoUsuario());
                txtCodigo.setEnabled(false);
                activar(true);
                userValue = txtUser.getText();
                cuenValue = txtCodigo.getText();
            } else {
                JOptionPane.showMessageDialog(this, "El código no existe", "Resultado", 1);
                limpiar();
            }
        } else {
            JOptionPane.showMessageDialog(this, "El código no es valido", "Resultado", 0);
            limpiar();
        }
    }//GEN-LAST:event_btnBuscarActionPerformed

    private void btnTransaccionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTransaccionActionPerformed
        IFrmModificarTransaccion i = new IFrmModificarTransaccion(txtUser.getText());
        i.setVisible(true);
    }//GEN-LAST:event_btnTransaccionActionPerformed

    private void btnMonedaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMonedaActionPerformed
        IFrmModificarMoneda i = new IFrmModificarMoneda();
        FrmEmpleado.centrarInternalFrame(i);
    }//GEN-LAST:event_btnMonedaActionPerformed

    private void btnMovimientosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMovimientosActionPerformed
        IFrmConsultarMovimientos i = new IFrmConsultarMovimientos();
        FrmEmpleado.centrarInternalFrame(i);
    }//GEN-LAST:event_btnMovimientosActionPerformed

    private void activar(boolean estado) {
        btnTransaccion.setEnabled(estado);
        btnMoneda.setEnabled(estado);
        btnMovimientos.setEnabled(estado);
    }
    
    private void limpiar() {
        txtCodigo.setText(null);
    }

    public static String getUserValue() {
        return userValue;
    }

    public static String getCuenValue() {
        return cuenValue;
    }

    
    
    private static String userValue = null;
    private static String cuenValue = null;
    private Cuenta cuenta = null;
    private String codigo = null;
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnBuscar;
    private javax.swing.JButton btnMoneda;
    private javax.swing.JButton btnMovimientos;
    private javax.swing.JButton btnTransaccion;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JLabel lbl5;
    private javax.swing.JTextField txtCodigo;
    public javax.swing.JTextField txtUser;
    // End of variables declaration//GEN-END:variables
}
